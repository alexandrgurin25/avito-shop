# Avito Shop

**Avito Shop** — это сервис, разработанный в рамках [тестового задания](https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-winter-2025/Backend-trainee-assignment-winter-2025.md) для стажёра Backend-направления зимней волны 2025 года в компании Авито. Сервис позволяет сотрудникам обмениваться внутренними монетами и приобретать мерч за эти монеты.

## Функциональность

- **Покупка мерча**: Сотрудники могут приобретать товары за внутренние монеты.
- **Перевод монет**: Возможность перевода монет другим сотрудникам в знак благодарности или в качестве подарка.
- **История транзакций**: Просмотр истории покупок и переводов монет с детализацией.

## Технологии

Проект разработан с использованием следующих технологий:

- Go (Golang)
- PostgreSQL
- Docker
- JWT

## Конфигурация

В целях упрощения процесса тестирования было принято решение не использовать файл `.env` для хранения конфигурационных данных. Вместо этого необходимые параметры задаются через виртуальные переменные среды непосредственно в коде. Это позволяет быстрее настраивать и запускать приложение без дополнительной подготовки окружения.

## Установка и запуск

1. **Клонирование репозитория**:

   ```bash
   git clone https://github.com/alexandrgurin25/avito-shop.git
   cd avito-shop

2. **Запуск с использованием Docker Compose**:
   ```bash
   docker-compose up

## Использование

После успешного запуска сервис будет доступен по адресу `http://localhost:8080`. API предоставляет следующие основные эндпоинты:
- *GET /api/info*        — получить информацию о монетах, инвентаре и истории транзакций.
- *GET /api/buy/{item}*  — купить предмет за монеты.
- *POST /api/sendCoin*   — отправить монеты другому пользователю.
- *POST /api/auth*       — аутентификация и получение JWT-токена.

Подробное описание всех доступных эндпоинтов и их параметров доступно в [документации API](https://github.com/avito-tech/tech-internship/blob/main/Tech%20Internships/Backend/Backend-trainee-assignment-winter-2025/schema.json).

## Архитектура

Сервис реализован с использованием **многослойной архитектуры**, что позволяет разделить логику приложения на несколько слоев, таких как:

- **Презентационный слой** — отвечает за взаимодействие с пользователем.
- **Слой бизнес-логики** — обрабатывает бизнес-правила и логику приложения.
- **Слой доступа к данным** — управляет взаимодействием с базой данных.

## Транзакции

В базе данных используются **транзакции**, что обеспечивает целостность и согласованность данных при выполнении операций. Каждая транзакция гарантирует, что все изменения данных будут выполнены успешно или не будут применены вовсе в случае ошибки.

## Юнит-тестирование и моки

Для обеспечения надежности и корректности работы приложения используются **юнит-тесты**, которые покрывают бизнес-логику. В процессе тестирования применяются **моки** — объекты, которые имитируют поведение реальных объектов. Это позволяет:

- Изолировать тестируемые компоненты от внешних зависимостей.
- Проверять взаимодействие между компонентами.
- Упрощать тестирование в условиях, когда реальные объекты могут быть недоступны или сложны в настройке.

Использование моков помогает повысить скорость выполнения тестов и улучшить их стабильность.

## Интеграционные тесты

Кроме юнит-тестов, также проводятся **интеграционные тесты**, которые взаимодействуют с базой данных PostgreSQL. Эти тесты проверяют взаимодействие между различными компонентами системы и позволяют убедиться, что все части приложения работают корректно вместе. Интеграционные тесты помогают выявить проблемы, которые могут возникнуть при взаимодействии различных слоев и модулей, а также обеспечивают более полное покрытие и гарантируют, что приложение будет функционировать как ожидается в реальных условиях.

